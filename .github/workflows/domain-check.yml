name: VerificaciÃ³n de Dominio

on:
Â  schedule:
Â  Â  # Ejecuta cada 6 horas
Â  Â  - cron: '0 */6 * * *'
Â  workflow_dispatch:

jobs:
Â  check-domain:
Â  Â  runs-on: ubuntu-latest
Â  Â Â 
Â  Â  steps:
Â  Â  - name: Checkout repositorio
Â  Â  Â  uses: actions/checkout@v4
Â  Â  Â Â 
Â  Â  - name: Instalar herramientas necesarias
Â  Â  Â  run: |
Â  Â  Â  Â  sudo apt-get update
Â  Â  Â  Â  sudo apt-get install -y dnsutils curl jq
Â  Â  Â  Â Â 
Â  Â  - name: Configurar fecha y variables
Â  Â  Â  id: date
Â  Â  Â  run: |
Â  Â  Â  Â  echo "datetime=$(date '+%Y-%m-%d %H:%M:%S UTC')" >> $GITHUB_OUTPUT
Â  Â  Â  Â  echo "short_date=$(date '+%Y-%m-%d')" >> $GITHUB_OUTPUT
Â  Â  Â  Â  echo "time_only=$(date '+%H:%M UTC')" >> $GITHUB_OUTPUT
Â  Â  Â  Â Â 
Â  Â  - name: Verificar dominio y crear log
Â  Â  Â  id: domain_check
Â  Â  Â  run: |
Â  Â  Â  Â  mkdir -p logs
Â  Â  Â  Â Â 
Â  Â  Â  Â  DOMAIN="chakielroms.com"
Â  Â  Â  Â  GITHUB_DOMAIN="chakielzero.github.io"
Â  Â  Â  Â  LOG_FILE="logs/domain.log"
Â  Â  Â  Â  DATE="${{ steps.date.outputs.datetime }}"
Â  Â  Â  Â Â 
Â  Â  Â  Â  echo "=== VERIFICACIÃ“N DE DOMINIO - $DATE ===" > $LOG_FILE
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # InformaciÃ³n bÃ¡sica del dominio
Â  Â  Â  Â  echo "ğŸŒ DOMINIO PRINCIPAL: $DOMAIN" >> $LOG_FILE
Â  Â  Â  Â  echo "ğŸ”— GITHUB PAGES: $GITHUB_DOMAIN" >> $LOG_FILE
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # Variables para el resumen
Â  Â  Â  Â  ISSUES_FOUND=0
Â  Â  Â  Â  CRITICAL_ISSUES=""
Â  Â  Â  Â  STATUS_SUMMARY=""
Â  Â  Â  Â Â 
Â  Â  Â  Â  # --- VERIFICACIÃ“N DE DNS RECORDS ---
Â  Â  Â  Â  echo "=== DNS RECORDS ===" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # Verificar registros A para el dominio principal
Â  Â  Â  Â  echo "ğŸ“‹ Registros A:" >> $LOG_FILE
Â  Â  Â  Â  A_RECORDS=$(dig +short A $DOMAIN 2>/dev/null || echo "ERROR")
Â  Â  Â  Â  if [ "$A_RECORDS" = "ERROR" ] || [ -z "$A_RECORDS" ]; then
Â  Â  Â  Â  Â  echo "âŒ Error obteniendo registros A" >> $LOG_FILE
Â  Â  Â  Â  Â  ISSUES_FOUND=$((ISSUES_FOUND + 1))
Â  Â  Â  Â  Â  CRITICAL_ISSUES="$CRITICAL_ISSUES\nâŒ Registros DNS A no encontrados"
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  echo "$A_RECORDS" >> $LOG_FILE
Â  Â  Â  Â  fi
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  echo "ğŸ“‹ Registros AAAA (IPv6):" >> $LOG_FILE
Â  Â  Â  Â  AAAA_RECORDS=$(dig +short AAAA $DOMAIN 2>/dev/null || echo "")
Â  Â  Â  Â  if [ -z "$AAAA_RECORDS" ]; then
Â  Â  Â  Â  Â  echo "âŒ No hay registros AAAA" >> $LOG_FILE
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  echo "$AAAA_RECORDS" >> $LOG_FILE
Â  Â  Â  Â  fi
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # Verificar CNAME solo en el subdominio www
Â  Â  Â  Â  echo "ğŸ“‹ Registros CNAME (www):" >> $LOG_FILE
Â  Â  Â  Â  CNAME_RECORDS=$(dig +short CNAME "www.$DOMAIN" 2>/dev/null || echo "")
Â  Â  Â  Â  if [ -z "$CNAME_RECORDS" ]; then
Â  Â  Â  Â  Â  echo "âŒ No hay registros CNAME (www)" >> $LOG_FILE
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  echo "$CNAME_RECORDS" >> $LOG_FILE
Â  Â  Â  Â  fi
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  echo "ğŸ“‹ Registros MX:" >> $LOG_FILE
Â  Â  Â  Â  MX_RECORDS=$(dig +short MX $DOMAIN 2>/dev/null || echo "")
Â  Â  Â  Â  if [ -z "$MX_RECORDS" ]; then
Â  Â  Â  Â  Â  echo "âŒ No hay registros MX" >> $LOG_FILE
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  echo "$MX_RECORDS" >> $LOG_FILE
Â  Â  Â  Â  fi
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  echo "ğŸ“‹ Registros TXT:" >> $LOG_FILE
Â  Â  Â  Â  TXT_RECORDS=$(dig +short TXT $DOMAIN 2>/dev/null || echo "")
Â  Â  Â  Â  if [ -z "$TXT_RECORDS" ]; then
Â  Â  Â  Â  Â  echo "âŒ No hay registros TXT" >> $LOG_FILE
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  echo "$TXT_RECORDS" >> $LOG_FILE
Â  Â  Â  Â  fi
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # Verificar conectividad HTTP/HTTPS
Â  Â  Â  Â  echo "=== VERIFICACIÃ“N DE CONECTIVIDAD ===" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # HTTP
Â  Â  Â  Â  echo "ğŸ” Verificando HTTP (http://$DOMAIN):" >> $LOG_FILE
Â  Â  Â  Â  HTTP_STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 10 "http://$DOMAIN" 2>/dev/null || echo "ERROR")
Â  Â  Â  Â  if [ "$HTTP_STATUS" = "ERROR" ]; then
Â  Â  Â  Â  Â  echo "âŒ No se pudo conectar via HTTP" >> $LOG_FILE
Â  Â  Â  Â  Â  ISSUES_FOUND=$((ISSUES_FOUND + 1))
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  echo "âœ… Estado HTTP: $HTTP_STATUS" >> $LOG_FILE
Â  Â  Â  Â  fi
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # HTTPS
Â  Â  Â  Â  echo "ğŸ” Verificando HTTPS (https://$DOMAIN):" >> $LOG_FILE
Â  Â  Â  Â  HTTPS_STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 10 "https://$DOMAIN" 2>/dev/null || echo "ERROR")
Â  Â  Â  Â  if [ "$HTTPS_STATUS" = "ERROR" ]; then
Â  Â  Â  Â  Â  echo "âŒ No se pudo conectar via HTTPS" >> $LOG_FILE
Â  Â  Â  Â  Â  ISSUES_FOUND=$((ISSUES_FOUND + 1))
Â  Â  Â  Â  Â  CRITICAL_ISSUES="$CRITICAL_ISSUES\nâŒ HTTPS no responde"
Â  Â  Â  Â  elif [ "$HTTPS_STATUS" != "200" ]; then
Â  Â  Â  Â  Â  echo "âš ï¸ Estado HTTPS: $HTTPS_STATUS" >> $LOG_FILE
Â  Â  Â  Â  Â  ISSUES_FOUND=$((ISSUES_FOUND + 1))
Â  Â  Â  Â  Â  CRITICAL_ISSUES="$CRITICAL_ISSUES\nâš ï¸ HTTPS devuelve cÃ³digo $HTTPS_STATUS"
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  echo "âœ… Estado HTTPS: $HTTPS_STATUS" >> $LOG_FILE
Â  Â  Â  Â  fi
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # Verificar certificado SSL
Â  Â  Â  Â  echo "=== CERTIFICADO SSL ===" >> $LOG_FILE
Â  Â  Â  Â  SSL_INFO=$(echo | openssl s_client -servername $DOMAIN -connect $DOMAIN:443 2>/dev/null | openssl x509 -noout -dates 2>/dev/null || echo "ERROR")
Â  Â  Â  Â  if [ "$SSL_INFO" = "ERROR" ]; then
Â  Â  Â  Â  Â  echo "âŒ No se pudo obtener informaciÃ³n del certificado SSL" >> $LOG_FILE
Â  Â  Â  Â  Â  ISSUES_FOUND=$((ISSUES_FOUND + 1))
Â  Â  Â  Â  Â  CRITICAL_ISSUES="$CRITICAL_ISSUES\nâŒ Certificado SSL no disponible"
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  echo "ğŸ“œ InformaciÃ³n del certificado:" >> $LOG_FILE
Â  Â  Â  Â  Â  echo "$SSL_INFO" >> $LOG_FILE
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  # Verificar si el certificado estÃ¡ prÃ³ximo a vencer (30 dÃ­as)
Â  Â  Â  Â  Â  NOT_AFTER=$(echo "$SSL_INFO" | grep "notAfter" | cut -d= -f2)
Â  Â  Â  Â  Â  if [ -n "$NOT_AFTER" ]; then
Â  Â  Â  Â  Â  Â  EXPIRY_DATE=$(date -d "$NOT_AFTER" +%s 2>/dev/null || echo "0")
Â  Â  Â  Â  Â  Â  CURRENT_DATE=$(date +%s)
Â  Â  Â  Â  Â  Â  DAYS_UNTIL_EXPIRY=$(( (EXPIRY_DATE - CURRENT_DATE) / 86400 ))
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if [ "$DAYS_UNTIL_EXPIRY" -lt 30 ] && [ "$DAYS_UNTIL_EXPIRY" -gt 0 ]; then
Â  Â  Â  Â  Â  Â  Â  echo "âš ï¸ Certificado expira en $DAYS_UNTIL_EXPIRY dÃ­as" >> $LOG_FILE
Â  Â  Â  Â  Â  Â  Â  CRITICAL_ISSUES="$CRITICAL_ISSUES\nâš ï¸ Certificado SSL expira en $DAYS_UNTIL_EXPIRY dÃ­as"
Â  Â  Â  Â  Â  Â  elif [ "$DAYS_UNTIL_EXPIRY" -le 0 ]; then
Â  Â  Â  Â  Â  Â  Â  echo "âŒ Certificado SSL expirado" >> $LOG_FILE
Â  Â  Â  Â  Â  Â  Â  CRITICAL_ISSUES="$CRITICAL_ISSUES\nâŒ Certificado SSL expirado"
Â  Â  Â  Â  Â  Â  Â  ISSUES_FOUND=$((ISSUES_FOUND + 1))
Â  Â  Â  Â  Â  Â  fi
Â  Â  Â  Â  Â  fi
Â  Â  Â  Â  fi
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # Verificar tiempo de respuesta
Â  Â  Â  Â  echo "=== TIEMPO DE RESPUESTA ===" >> $LOG_FILE
Â  Â  Â  Â  RESPONSE_TIME=$(curl -s -o /dev/null -w "%{time_total}" --max-time 10 "https://$DOMAIN" 2>/dev/null || echo "ERROR")
Â  Â  Â  Â  if [ "$RESPONSE_TIME" = "ERROR" ]; then
Â  Â  Â  Â  Â  echo "âŒ No se pudo medir el tiempo de respuesta" >> $LOG_FILE
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  echo "â±ï¸ Tiempo de respuesta: ${RESPONSE_TIME}s" >> $LOG_FILE
Â  Â  Â  Â  Â  # Advertir si el tiempo de respuesta es muy lento (>3 segundos)
Â  Â  Â  Â  Â  if (( $(echo "$RESPONSE_TIME > 3.0" | bc -l 2>/dev/null || echo "0") )); then
Â  Â  Â  Â  Â  Â  echo "âš ï¸ Tiempo de respuesta lento (>${RESPONSE_TIME}s)" >> $LOG_FILE
Â  Â  Â  Â  Â  Â  CRITICAL_ISSUES="$CRITICAL_ISSUES\nâš ï¸ Sitio lento (${RESPONSE_TIME}s)"
Â  Â  Â  Â  Â  fi
Â  Â  Â  Â  fi
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # Verificar headers importantes
Â  Â  Â  Â  echo "=== HEADERS DE SEGURIDAD ===" >> $LOG_FILE
Â  Â  Â  Â  HEADERS=$(curl -s -I "https://$DOMAIN" --max-time 10 2>/dev/null || echo "ERROR")
Â  Â  Â  Â  if [ "$HEADERS" = "ERROR" ]; then
Â  Â  Â  Â  Â  echo "âŒ No se pudieron obtener los headers" >> $LOG_FILE
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  echo "ğŸ”’ Content-Security-Policy:" >> $LOG_FILE
Â  Â  Â  Â  Â  echo "$HEADERS" | grep -i "content-security-policy" || echo "âŒ No configurado" >> $LOG_FILE
Â  Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  echo "ğŸ”’ X-Frame-Options:" >> $LOG_FILE
Â  Â  Â  Â  Â  echo "$HEADERS" | grep -i "x-frame-options" || echo "âŒ No configurado" >> $LOG_FILE
Â  Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  echo "ğŸ”’ Strict-Transport-Security:" >> $LOG_FILE
Â  Â  Â  Â  Â  echo "$HEADERS" | grep -i "strict-transport-security" || echo "âŒ No configurado" >> $LOG_FILE
Â  Â  Â  Â  fi
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # Verificar redirecciones
Â  Â  Â  Â  echo "=== REDIRECCIONES ===" >> $LOG_FILE
Â  Â  Â  Â  echo "ğŸ”„ Verificando redirecciÃ³n www -> no-www:" >> $LOG_FILE
Â  Â  Â  Â  WWW_STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 10 "https://www.$DOMAIN" 2>/dev/null || echo "ERROR")
Â  Â  Â  Â  echo "Estado www.$DOMAIN: $WWW_STATUS" >> $LOG_FILE
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # Verificar GitHub Pages especÃ­ficamente
Â  Â  Â  Â  echo "=== VERIFICACIÃ“N GITHUB PAGES ===" >> $LOG_FILE
Â  Â  Â  Â  GH_STATUS=$(curl -s -o /dev/null -w "%{http_code}" --max-time 10 "https://$GITHUB_DOMAIN" 2>/dev/null || echo "ERROR")
Â  Â  Â  Â  echo "âœ… Estado GitHub Pages ($GITHUB_DOMAIN): $GH_STATUS" >> $LOG_FILE
Â  Â  Â  Â  if [ "$GH_STATUS" != "200" ] && [ "$GH_STATUS" != "ERROR" ]; then
Â  Â  Â  Â  Â  CRITICAL_ISSUES="$CRITICAL_ISSUES\nâš ï¸ GitHub Pages devuelve cÃ³digo $GH_STATUS"
Â  Â  Â  Â  fi
Â  Â  Â  Â  echo "" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # Resumen
Â  Â  Â  Â  echo "=== RESUMEN ===" >> $LOG_FILE
Â  Â  Â  Â  if [ "$HTTPS_STATUS" = "200" ] && [ "$ISSUES_FOUND" -eq 0 ]; then
Â  Â  Â  Â  Â  echo "âœ… Dominio funcionando correctamente" >> $LOG_FILE
Â  Â  Â  Â  Â  STATUS_SUMMARY="âœ… Todo funcionando correctamente"
Â  Â  Â  Â  elif [ "$HTTPS_STATUS" = "200" ] && [ "$ISSUES_FOUND" -gt 0 ]; then
Â  Â  Â  Â  Â  echo "âš ï¸ Dominio funcionando con advertencias ($ISSUES_FOUND problemas menores)" >> $LOG_FILE
Â  Â  Â  Â  Â  STATUS_SUMMARY="âš ï¸ Funcionando con $ISSUES_FOUND advertencias"
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  echo "âŒ Problemas crÃ­ticos detectados en el dominio" >> $LOG_FILE
Â  Â  Â  Â  Â  STATUS_SUMMARY="âŒ Problemas crÃ­ticos detectados"
Â  Â  Â  Â  fi
Â  Â  Â  Â Â 
Â  Â  Â  Â  echo "ğŸ“Š VerificaciÃ³n completada: $DATE" >> $LOG_FILE
Â  Â  Â  Â Â 
Â  Â  Â  Â  # Establecer variables de salida para Discord
Â  Â  Â  Â  echo "https_status=$HTTPS_STATUS" >> $GITHUB_OUTPUT
Â  Â  Â  Â  echo "issues_count=$ISSUES_FOUND" >> $GITHUB_OUTPUT
Â  Â  Â  Â  echo "status_summary=$STATUS_SUMMARY" >> $GITHUB_OUTPUT
Â  Â  Â  Â  echo "critical_issues=$CRITICAL_ISSUES" >> $GITHUB_OUTPUT
Â  Â  Â  Â  echo "response_time=$RESPONSE_TIME" >> $GITHUB_OUTPUT
Â  Â  Â  Â  echo "log_size=$(du -h logs/domain.log | cut -f1)" >> $GITHUB_OUTPUT
Â  Â  Â  Â Â 
Â  Â  - name: Commit y push del log
Â  Â  Â  run: |
Â  Â  Â  Â  git config --local user.email "action@github.com"
Â  Â  Â  Â  git config --local user.name "GitHub Action"
Â  Â  Â  Â Â 
Â  Â  Â  Â  git add logs/domain.log
Â  Â  Â  Â Â 
Â  Â  Â  Â  if git diff --staged --quiet; then
Â  Â  Â  Â  Â  echo "No hay cambios en el log de dominio"
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  git commit -m "ğŸ“Š ActualizaciÃ³n log de dominio - ${{ steps.date.outputs.short_date }} ${{ steps.date.outputs.time_only }}"
Â  Â  Â  Â  Â  git push
Â  Â  Â  Â  fi

Â  Â  # --- NotificaciÃ³n a Discord (dominio funcionando correctamente) ---
Â  Â  - name: NotificaciÃ³n de Ã©xito en Discord
Â  Â  Â  if: success() && steps.domain_check.outputs.https_status == '200' && steps.domain_check.outputs.issues_count == '0'
Â  Â  Â  uses: tsickert/discord-webhook@v5.3.0
Â  Â  Â  with:
Â  Â  Â  Â  webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}
Â  Â  Â  Â  content: |
Â  Â  Â  Â  Â  âœ… **VerificaciÃ³n de dominio completada**
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸŒ chakielroms.com** estÃ¡ funcionando perfectamente
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸ“Š Detalles:**
Â  Â  Â  Â  Â  - **Estado HTTPS**: `200 OK`
Â  Â  Â  Â  Â  - **Tiempo de respuesta**: `${{ steps.domain_check.outputs.response_time }}s`
Â  Â  Â  Â  Â  - **Fecha**: `${{ steps.date.outputs.short_date }} a las ${{ steps.date.outputs.time_only }}`
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸ“ Log completo:** [`domain.log`](<${{ github.server_url }}/${{ github.repository }}/blob/main/logs/domain.log>) (`${{ steps.domain_check.outputs.log_size }}`)

Â  Â  # --- NotificaciÃ³n a Discord (advertencias menores) ---
Â  Â  - name: NotificaciÃ³n de advertencias en Discord
Â  Â  Â  if: success() && steps.domain_check.outputs.https_status == '200' && steps.domain_check.outputs.issues_count != '0'
Â  Â  Â  uses: tsickert/discord-webhook@v5.3.0
Â  Â  Â  with:
Â  Â  Â  Â  webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}
Â  Â  Â  Â  content: |
Â  Â  Â  Â  Â  âš ï¸ **VerificaciÃ³n de dominio - Advertencias detectadas**
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸŒ chakielroms.com** funciona pero con **${{ steps.domain_check.outputs.issues_count }}** advertencias
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸ” Problemas encontrados:**${{ steps.domain_check.outputs.critical_issues }}
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸ“Š Detalles:**
Â  Â  Â  Â  Â  - **Estado HTTPS**: `200 OK`
Â  Â  Â  Â  Â  - **Tiempo de respuesta**: `${{ steps.domain_check.outputs.response_time }}s`
Â  Â  Â  Â  Â  - **Fecha**: `${{ steps.date.outputs.short_date }} a las ${{ steps.date.outputs.time_only }}`
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸ“ Revisar log completo:** [`domain.log`](<${{ github.server_url }}/${{ github.repository }}/blob/main/logs/domain.log>) (`${{ steps.domain_check.outputs.log_size }}`)

Â  Â  # --- NotificaciÃ³n a Discord (problemas crÃ­ticos) ---
Â  Â  - name: NotificaciÃ³n de problemas crÃ­ticos en Discord
Â  Â  Â  if: success() && steps.domain_check.outputs.https_status != '200'
Â  Â  Â  uses: tsickert/discord-webhook@v5.3.0
Â  Â  Â  with:
Â  Â  Â  Â  webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}
Â  Â  Â  Â  content: |
Â  Â  Â  Â  Â  ğŸš¨ **Â¡ALERTA! Problemas crÃ­ticos en el dominio**
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸŒ chakielroms.com** presenta **problemas crÃ­ticos**
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **âŒ Estado actual:** `${{ steps.domain_check.outputs.status_summary }}`
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸ” Problemas crÃ­ticos:**${{ steps.domain_check.outputs.critical_issues }}
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸ“Š Detalles:**
Â  Â  Â  Â  Â  - **Estado HTTPS**: `${{ steps.domain_check.outputs.https_status }}`
Â  Â  Â  Â  Â  - **Fecha**: `${{ steps.date.outputs.short_date }} a las ${{ steps.date.outputs.time_only }}`
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸ“ Log completo:** [`domain.log`](<${{ github.server_url }}/${{ github.repository }}/blob/main/logs/domain.log>) (`${{ steps.domain_check.outputs.log_size }}`)
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **âš¡ AcciÃ³n requerida:** Revisar configuraciÃ³n DNS y estado del servidor

Â  Â  # --- NotificaciÃ³n a Discord (fallo de la acciÃ³n) ---
Â  Â  - name: NotificaciÃ³n de fallo en Discord
Â  Â  Â  if: failure()
Â  Â  Â  uses: tsickert/discord-webhook@v5.3.0
Â  Â  Â  with:
Â  Â  Â  Â  webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}
Â  Â  Â  Â  content: |
Â  Â  Â  Â  Â  âŒ **Â¡Error en la verificaciÃ³n de dominio!**
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  La acciÃ³n de verificaciÃ³n para **chakielroms.com** fallÃ³ durante la ejecuciÃ³n.
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸ”— Ver detalles del error:**
Â  Â  Â  Â  Â  ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  **ğŸ“… Fecha:** `${{ steps.date.outputs.short_date }} a las ${{ steps.date.outputs.time_only }}`
